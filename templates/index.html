{% load static %}

<!DOCTYPE html>
<html lang="en">


<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="{% static 'favicon.png' %}" rel="icon" type="image/png">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css">
    <title>ScreenIt</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
<!--    <link rel="stylesheet" href="{% static 'assets/css/styles.css' %}">-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<script>
var downloadLink = document.getElementById("downloadLink");

function handleDownload(path) {
  downloadFile(path);
};

function downloadFile(filePath) {
  var link = document.createElement("a");
  link.download = "";
  link.href = filePath;
  link.click();
}
function myFunction() {
  var x = document.getElementById("manual-input");
  var y = document.getElementById("auto-input");
  console.log("hello");
  if (x.style.display === "flex") {
    x.style.display = "none";
  } else {
    x.style.display = "flex";
  }
  if (x.style.display === "flex") {
    y.style.display = "none";
  } else {
    y.style.display = "flex";
  }
}
</script>
<style>
    .resume-container{
    width: 60%;
    }
@media only screen and (max-width: 1400px) {
  .resume-container{
    width: 60%;
    }
  }
  .switch {
  position: relative;
  display: inline-block;
  width: 60px;
  height: 34px;
}

.switch input {
  opacity: 0;
  width: 0;
  height: 0;
}

.slider {
  position: absolute;
  cursor: pointer;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: #ccc;
  -webkit-transition: .4s;
  transition: .4s;
}

.slider:before {
  position: absolute;
  content: "";
  height: 26px;
  width: 26px;
  left: 4px;
  bottom: 4px;
  background-color: white;
  -webkit-transition: .4s;
  transition: .4s;
}

input:checked + .slider {
  background-color: #2196F3;
}

input:focus + .slider {
  box-shadow: 0 0 1px #2196F3;
}

input:checked + .slider:before {
  -webkit-transform: translateX(26px);
  -ms-transform: translateX(26px);
  transform: translateX(26px);
}

/* Rounded sliders */
.slider.round {
  border-radius: 34px;
}

.slider.round:before {
  border-radius: 50%;
}
</style>
</head>

<body class="bg-dark">
<nav class="navbar navbar-expand-lg navbar-light bg-warning ">
    <h1 class="mr-5">ScreenIT</h1>
  <a class="navbar-brand" href="#"></a>
<!--  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">-->
<!--    <span class="navbar-toggler-icon"></span>-->
<!--  </button>-->

  <div class="collapse navbar-collapse" id="navbarNav">
    <ul class="navbar-nav">
      <li class="nav-item active">
        <a class="nav-link" href="/">Home <span class="sr-only">(current)</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/upload_resume">Upload</a>
      </li>
    </ul>
  </div>
</nav>
<div class="container mt-5" style="min-width:100%;">
     <div class="col text-light d-flex justify-content-center">
         <div style="width:90%;">
         <h1>Search for Resumes based on Skills, designation, projects, experience etc...</h1>
    </div>
</div>
    <div style="display:flex;flex-direction:row;" class="m-4">
        <label class="switch">
  <input onclick="myFunction()" type="checkbox">
  <span class="slider round"></span>
</label>
        <h3 class="text-light mx-2">Enable search through job description</h3>
    </div>
<form id="manual-input" method="post" class="container justify-content-center mt-5 ml-0 mb-5" style="min-width:100%;display:flex;flex-direction:column;">
    {% csrf_token %}
<!--    <div style="display:none;">-->
<!--        <div class="input-group col-md-6 col-lg-9 mb-4" style="display:flex;flex-direction:column;">-->
<!--    <div style="width:90%;">-->
<!--         <h4 class="text-light">Enter the job description</h4>-->
<!--    </div>-->
<!--    <div style="display:flex;flex-direction:row;">-->
<!--        <textarea data-value="none" required name="jobdescription" class="form-control py-2 border-right-0 border" rows="10" placeholder="Eg. Experienced person in c++/c and python..."></textarea>-->
<!--    </div>-->
<!--        </div>-->
<!--    </div>-->
    <div>
        <div class="input-group col-md-6 col-lg-9 mb-4" style="display:flex;flex-direction:column;">
    <div style="width:90%;">
         <h4 class="text-light">Select the required designation</h4>
    </div>
    <div style="display:flex;flex-direction:row;">
        <input required name="designationQuery" class="form-control py-2 border-right-0 border" type="text" placeholder="Eg. data analyst (or) data engineer (or) HR ..." id="designation-input">
    </div>
        </div>
    <div class="input-group col-md-6 col-lg-9 mt-3" style="display:flex;flex-direction:column;">
        <div style="width:90%;">
         <h4 class="text-light">Select the required skills</h4>
    </div>
        <div style="display:flex;flex-direction:row;">
            <input required name="searchQuery" class="form-control py-2 border-right-0 border" type="search" placeholder="Eg. reactjs, angular, machine learning, data analyst..." id="example-search-input">
        </div>
        </div>
    </div>
    <div class="input-group col-md-6 col-lg-9 mt-3" style="display:flex;flex-direction:column;">
        <div style="width:90%;">
         <h4 class="text-light">Select the required location</h4>
    </div>
        <div style="display:flex;flex-direction:row;">
            <input required name="searchLocation" class="form-control py-2 border-right-0 border" type="search" placeholder="Eg. reactjs, angular, machine learning, data analyst...">
        </div>
        </div>
    <div class="input-group col-md-6 col-lg-9 mt-3" style="display:flex;flex-direction:column;">
        <div style="width:90%;">
         <h4 class="text-light">Select the experience level</h4>
    </div>
        <div style="display:flex;flex-direction:row;width:60%;" class="d-flex col-12">
            <select name="experience" class="d-flex col-12 p-2" required>
                <option value="fresher">Freshers</option>
                <option value="experienced">Experience>=1</option>
            </select>
        </div>
    </div>
        <div class="input-group col-md-6 col-lg-9 mt-3" style="display:flex;flex-direction:column;">
        <div style="width:90%;">
         <h4 class="text-light">Select the minimum required education</h4>
    </div>
        <div style="display:flex;flex-direction:row;width:60%;" class="d-flex">
            <select name="education" class="d-flex col-12 p-2" required>
                <option value="bachelors">Bachelors</option>
                <option value="masters">Masters</option>
                <option value="phd">Phd</option>
            </select>
        </div>

        <div class="d-flex ">
            <button class="bg-primary text-light p-2 m-3 mt-5 rounded col-3" style="border:none;">Search</button>
        </div>
        </div>
    </form>
    <form id="auto-input" method="post" class="container justify-content-center mt-5 ml-0 mb-5" style="min-width:100%;display:none;flex-direction:column;">
    {% csrf_token %}
    <div style="display:block;">
        <div class="input-group col-md-6 col-lg-9 mb-4" style="display:flex;flex-direction:column;">
    <div style="width:90%;">
         <h4 class="text-light">Enter the job description</h4>
    </div>
    <div style="display:flex;flex-direction:row;">
        <textarea data-value="none" required name="jobdescription" class="form-control py-2 border-right-0 border" rows="10" placeholder="Eg. Experienced person in c++/c and python..."></textarea>
    </div>
        </div>
    </div>
         <div>
        <div class="input-group col-md-6 col-lg-9 mb-4" style="display:flex;flex-direction:column;">
    <div style="width:90%;">
         <h4 class="text-light">Select the required designation</h4>
    </div>
    <div style="display:flex;flex-direction:row;">
        <input required name="designationQuery" class="form-control py-2 border-right-0 border" type="text" placeholder="Eg. data analyst (or) data engineer (or) HR ..." id="designation-input">
    </div>
        </div>
    <div class="input-group col-md-6 col-lg-9 mt-3" style="display:flex;flex-direction:column;">
        <div style="width:90%;">
         <h4 class="text-light">Select the required location</h4>
    </div>
        <div style="display:flex;flex-direction:row;">
            <input required name="searchLocation" class="form-control py-2 border-right-0 border" type="search" placeholder="Eg. reactjs, angular, machine learning, data analyst...">
        </div>
        </div>
    <div class="input-group col-md-6 col-lg-9 mt-3" style="display:flex;flex-direction:column;">
        <div style="width:90%;">
         <h4 class="text-light">Select the experience level</h4>
    </div>
        <div style="display:flex;flex-direction:row;width:60%;" class="d-flex col-12">
            <select name="experience" class="d-flex col-12 p-2" required>
                <option value="fresher">Freshers</option>
                <option value="experienced">Experience>=1</option>
            </select>
        </div>
    </div>
        <div class="input-group col-md-6 col-lg-9 mt-3" style="display:flex;flex-direction:column;">
        <div style="width:90%;">
         <h4 class="text-light">Select the minimum required education</h4>
    </div>
        <div style="display:flex;flex-direction:row;width:60%;" class="d-flex">
            <select name="education" class="d-flex col-12 p-2" required>
                <option value="bachelors">Bachelors</option>
                <option value="masters">Masters</option>
                <option value="phd">Phd</option>
            </select>
        </div>

        <div class="d-flex ">
            <button class="bg-primary text-light p-2 m-3 mt-5 rounded col-3" style="border:none;">Search</button>
        </div>
        </div>
    </form>
</div>
{% if not posted %}


 <div style="display:flex;flex-direction:row;width:70%;overflow-x:hidden;" class="container justify-content-center mb-3">
     {% for q in query %}
            <span class="text-light mx-2">{{q}}</span>
     {% endfor %}
 </div>
<hr>
{% if posted %}

{% endif %}
{% if send %}
<div class="d-flex justify-content-center">
    <span class="text-light fs-4 m-2" style="font-size:30px;">Send mail to shortlisted candidates</span>
<a href="/composemail"><button class="bg-primary p-1 px-2 m-3 text-light rounded" style="border:none;">Send Mail</button></a>
</div>
{% endif %}
{% for resume in results %}
<div class="container d-flex col col-11 col-md-7 justify-content-center mb-4 resume-container" style="flex-direction:column;">
    <div class="bg-light rounded p-4 d-flex flex-column justify-content-center" >
        <div style="display:flex;flex-direction:row;" class="container justify-content-between">
            <h4>{{resume.name}}</h4>
             {% if resume.bestFit %}
            <span class="text-light bg-success p-2 rounded">Best Fit</span>
            {% else %}
            <span class="text-light bg-warning p-2 rounded">Good Fit</span>
            {% endif %}
        </div>

        <div style="border-bottom:1px solid black;width:100%;" class="mt-3 mb-3"></div>
        <span><strong>Contact: </strong>{{resume.contactNumber}}</span>
        <span><strong>MailId: </strong>{{resume.mailid}}</span>
        <hr>
        <h4>Skills:</h4>
        <div style="border-bottom:1px solid black;width:100%;" class="mt-3 mb-3"></div>
        <div style="overflow-y:hidden;height:60%;" class="">
            {% for skill in resume.skills %}
        <span style="line-height: 2.5;" class="bg-primary text-light rounded p-1">{{skill}}</span>
            {% endfor %}
            <div style="border-bottom:1px solid black;width:100%;" class="mt-3 mb-3"></div>
<!--             <embed src = '../resumes/{{resume.resume}}' >-->
<!--             <a href="/preview" target="_blank" ><button name="toPreview" style="border: 0px solid;" type="button" id="openPdfButton" class="bg-success text-light p-2 m-2 rounded">Preview</button></a>-->
        <button style="border: 0px solid;" onclick="handleDownload('../resumes/'+'{{resume.resume}}')" id="downloadLink" class="bg-success text-light p-2 m-2 rounded">Download</button>
        </div>
    </div>
</div>
{% endfor %}
{% else %}
<div class="container d-flex col col-11 col-md-7 justify-content-center" style="flex-direction:column;width:60%;">
    <h1 class="justify-self-center mb-5 fs-4 text-light">No results found</h1>
</div>
    {% endif %}
<div style="display:flex;flex-direction:column" class="container d-flex justify-content-center mt-5">
     <div class="ml-lg-5 col-8" style="width:95%;">
         <h1 class="text-light">Having a Resume? Upload Here to check its Score</h1>
    </div>
    <center class="m-3 m-lg-5">
        <a href="/upload_resume"><button class="btn btn-primary rounded p-2 col-12 col-sm-4" type="button">Upload Resume</button></a>
    </center>
<!--    <a class="" href="/upload_resume"><button style="width:100px;" class="btn btn-primary rounded p-2" type="button">Upload Resume</button></a>-->
</div>

</body>

</html>